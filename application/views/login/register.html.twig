{# views/login/register.html.twig #}
{% extends 'base.html.twig' %}

{% block js_scripts %}
<script>
    function passwordsEquals() {
        var password1 = document.getElementById("password").value;
        var password2 = document.getElementById("password2").value;
        document.getElementById("submit").disabled = password1 !== password2 || password1.length < 6;
    }
</script>
{% endblock %}


{% block body %}
    <div class="container">
        <div class="jumbotron">
            <h1 class="display-4">Rejestracja</h1>
        </div>
        {% if isgood %}
            <div class="alert alert-success">{{ isgood }}</div>
        {% else %}
            <form action="{{ site_url('login/register') }}" method="post">
                <div class="form-group">
                    <label for="username">Nazwa użytkownika</label>
                    <input type="text" class="form-control{% if errors.username %} is-invalid{% endif %}" id="username" name="username" placeholder="Nazwa użytkownika">
                    {% if errors.username %}<div class="invalid-feedback">{{ errors.username }}</div>{% endif %}
                </div>
                <div class="form-group">
                    <label for="email">Adres e-mail</label>
                    <input type="email" class="form-control{% if errors.email %} is-invalid{% endif %}" id="email" name="email" placeholder="Adres email">
                    {% if errors.email %}<div class="invalid-feedback">{{ errors.email }}</div>{% endif %}
                </div>
                <div class="form-group">
                    <label for="password">Hasło</label>
                    <input type="password" class="form-control{% if errors.password %} is-invalid{% endif %}" id="password" name="password" placeholder="Hasło" onchange="passwordsEquals()">
                    {% if errors.password %}<div class="invalid-feedback">{{ errors.password }}</div>{% endif %}
                </div>
                <div class="form-group">
                    <label for="password2">Powtórz hasło</label>
                    <input type="password" class="form-control{% if errors.password2 %} is-invalid{% endif %}" id="password2" name="password2" placeholder="Hasło" onchange="passwordsEquals()">
                    {% if errors.password2 %}<div class="invalid-feedback">{{ errors.password2 }}</div>{% endif %}
                </div>
                <button type="submit" class="btn btn-primary mb-2" id="submit" name="submit" value="submit" disabled="disabled">Zarejestruj się</button>
            </form>
            {% if errors.other %}
                <div class="alert alert-danger">{{ errors.other }}</div>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}
