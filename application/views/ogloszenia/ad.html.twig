{# views/ogloszenia/ad.html.twig #}

{% extends 'base.html.twig' %}

{% block jsscripts %}
	<script src="https://unpkg.com/react@16/umd/react.production.min.js" crossorigin></script>
	<script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js" crossorigin></script>
{% endblock %}

{% block body %}
	{% include 'page/alerts.html.twig' %}
	<div class="container-fluid">

		{% if not error %}
		<h1>Ogłoszenie</h1>
			<style>
				.center-cropped {
					object-fit: cover; /* Do not scale the image */
					object-position: center; /* Center the image within the element */
					height: 400px;
				}
			</style>
			<div class="row">
				<div class="col-8">
				<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
					<ol class="carousel-indicators">
						{% for ad_image in ad_images %}
							<li data-target="#carouselExampleIndicators" data-slide-to="{{ loop.index0 }}" {% if loop.first %} class="active"{% endif %}></li>
						{% endfor %}
					</ol>
					<div class="carousel-inner">
						{% for ad_image in ad_images %}
							<div class="carousel-item {% if loop.first %}active{% endif %} center-cropped">
								<div class="container">
									<img class="d-block w-100" src="{{ base_url('uploads/') }}{{ ad_image.filename }}" alt="First slide">
									<div class="carousel-caption d-none d-md-block">
										<a class="btn btn-primary" target="_blank" rel="noopener noreferrer" href="{{ base_url('uploads/') }}{{ ad_image.filename }}" role="button">Zobacz zdjęcie w nowej karcie</a>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
					<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
				</div>
				<div class="col-4">
					<div class="card">
						<div class="card-header">
							Kategoria <b>{{ad_category.category_path}}</b>
						</div>
						<div class="card-body">
							<h5 class="card-title">{{ad.offer_name}}</h5>
							<p class="card-text">{{ ad.description }}</p>
							<p class="card-text">Chcesz porozmawiać z osobą która wystawiła ogłoszenie?</p>
							{% if user %}
								<a href="#" class="btn btn-primary">Rozpocznij czat</a>
							{% else %}
								<a href="#" class="btn btn-primary">Zaloguj się</a>
							{% endif %}
							{% if 'ogloszenia:moderacja_akceptuj' in dostepneStrony and ad.accept == 0 %}<a class="btn btn-primary" href="{{ base_url('ogloszenia/moderacja_akceptuj/') }}{{ ad.id_offer }}">Akceptuj ogłoszenie</a>{% endif %}
							{% if 'ogloszenia:moderacja_anuluj' in dostepneStrony and ad.accept == 1 %}<a class="btn btn-primary" href="{{ base_url('ogloszenia/moderacja_anuluj/') }}{{ ad.id_offer }}">Anuluj ogłoszenie</a>{% endif %}
							{% if 'ogloszenia:obserwuj' in dostepneStrony and ad.accept == 1 %}<a class="btn btn-primary" href="{{ base_url('ogloszenia/obserwuj/') }}{{ ad.id_offer }}">{% if ad_observed %}Usuń z obserwowanych{% else %}Obserwuj ogłoszenie{% endif %}</a>{% endif %}
						</div>
					</div>
				</div>
			</div>
		{% endif %}
		<hr/>
		{% if 'ogloszenia:moderacja_akceptuj' in dostepneStrony %}
			<h5>
				Moderator:
			</h5>
			<a href="{{ base_url('ogloszenia/moderacja_index/') }}" role="button" class="btn btn-primary btn-sm">Niezaakceptowane ogłoszenia <i class="fas fa-universal-access"></i></a>
		{% endif %}
	</div>
{% endblock %}
